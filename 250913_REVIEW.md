# Project Review: Final Report and Prioritized Roadmap (2025-09-13)

This report synthesizes the findings from the comprehensive project analysis and organizes them into a prioritized, actionable roadmap. The priorities are categorized to help focus on the most critical items first.

---

### **Priority 1: Critical (Do First)**

These items address fundamental security vulnerabilities and project health. They should be completed before adding significant new features.

1.  **Implement Role-Based Access Control (RBAC):** This is the top priority. Protect all `/evaluator/*` routes to ensure they are only accessible by users with an 'evaluator' role. This prevents unauthorized access to sensitive application data.
2.  **Establish a Testing Framework:** Introduce `pytest` and create a `tests/` directory. Begin by writing integration tests for core functionality like authentication, registration, and form submissions. This is essential for making any future changes safely.
3.  **Add CSRF Protection:** Implement CSRF token validation for all POST requests to protect against Cross-Site Request Forgery attacks, a standard and necessary web security measure.

---

### **Priority 2: High Impact (Do Next)**

These tasks provide significant improvements in security, maintainability, and user experience.

1.  **Isolate Database Migrations:** Move the schema alteration logic out of `database.py` and into a series of dedicated migration scripts. This makes schema changes trackable, reversible, and far less risky.
2.  **Implement Structured Logging:** Replace all `print()` statements with Python's `logging` module. This is crucial for effective debugging and moving the application towards a production-ready state.
3.  **Harden File Handling:**
    *   **Uploads:** Sanitize all user-provided filenames and verify file content, not just the extension or MIME type.
    *   **Downloads:** Ensure the `Content-Disposition: attachment` header is always used when serving uploaded files to prevent the browser from executing them.
4.  **Add UI Loading Indicators:** Use HTMX's `htmx-indicator` feature to provide immediate visual feedback (e.g., spinners) on forms and buttons during submission. This dramatically improves the perceived responsiveness of the application.

---

### **Priority 3: Medium Impact (Plan For)**

These are important improvements that enhance the application but can be scheduled after the more critical items are addressed.

1.  **Improve Form UX:** Refactor the long "Work Experience" form using collapsible accordion sections to make it more manageable for users.
2.  **Refactor HTMX Responses:** Create a single utility function to handle the boilerplate logic of returning either a full page or a set of OOB (Out-of-Band) HTMX swaps. This will simplify all controller methods.
3.  **Centralize Application Configuration:** Move hardcoded data, such as form dropdown options, from controllers into dedicated files within the `app/config/` directory.
4.  **Improve Dependency Management:** Adopt a tool like `pip-tools` to create a `requirements.in` file for direct dependencies, which will generate a fully-pinned `requirements.txt`. This ensures reproducible builds.
5.  **Create an Interactive Evaluator Timeline:** Enhance the evaluator view by making the timeline interactive, allowing clicks on timeline items to highlight corresponding details on the page.

---

### **Priority 4: Low-Hanging Fruit (Quick Wins)**

These are low-effort, high-reward tasks that can be completed quickly.

1.  **Create a Developer Task Runner:** Add a `Makefile` to the project root with simple commands like `make run`, `make test`, and `make format` to standardize and simplify the development workflow.
2.  **Clarify Data Model Purpose:** Add a docstring to the top of `app/models.py` explaining that the dataclasses are for structural reference and type hinting, not for direct ORM use. This immediately improves clarity for new developers.
3.  **Enhance Feedback on Save:** Use a small amount of JavaScript or CSS to briefly highlight a newly added or updated item in a list, providing a clear visual confirmation of a successful action.
